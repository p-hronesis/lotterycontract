(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{348:function(e,t,n){},350:function(e,t,n){},352:function(e,t){},380:function(e,t){},383:function(e,t){},387:function(e,t){},408:function(e,t){},410:function(e,t){},419:function(e,t){},421:function(e,t){},430:function(e,t){},432:function(e,t){},530:function(e,t){},532:function(e,t){},560:function(e,t){},561:function(e,t){},566:function(e,t){},568:function(e,t){},575:function(e,t){},594:function(e,t){},612:function(e,t){},639:function(e,t){},641:function(e,t){},648:function(e,t){},649:function(e,t){},71:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"price_feed","type":"address"},{"internalType":"address","name":"vrf_oordinator","type":"address"},{"internalType":"address","name":"_link","type":"address"},{"internalType":"uint256","name":"_fee","type":"uint256"},{"internalType":"bytes32","name":"_keyhash","type":"bytes32"}],"stateMutability":"nonpayable","type":"constructor","name":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"requestId","type":"bytes32"}],"name":"RequestedRandomness","type":"event"},{"inputs":[{"internalType":"uint8","name":"_lottery_state","type":"uint8"}],"name":"changeLotteryState","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"endLottery","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"enter","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"entranceFeeInWei","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"fee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntranceFeeInWei","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"keyhash","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lottery_count","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lottery_state","outputs":[{"internalType":"enum Lottery.LOTTERY_STATE","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxUsdEntranceFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxUsdEntranceFeeInWei","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"players","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"randomness","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"requestId","type":"bytes32"},{"internalType":"uint256","name":"randomness","type":"uint256"}],"name":"rawFulfillRandomness","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"recentWinner","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"recentWinners","outputs":[{"internalType":"address","name":"player","type":"address"},{"internalType":"uint256","name":"entranceFeeInWei","type":"uint256"},{"internalType":"uint256","name":"applicants","type":"uint256"},{"internalType":"uint256","name":"amountWon","type":"uint256"},{"internalType":"uint256","name":"closedDate","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"setEntranceFeeInWei","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"startLottery","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"usdEntranceFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]')},736:function(e,t,n){"use strict";n.r(t);var a=n(10),i=n.n(a),s=n(330),r=n.n(s),c=(n(348),n(6)),o=n.n(c),u=n(44),l=n(32),d=(n(350),n(5));var p=function(){return Object(d.jsx)("div",{className:"header-title",children:"Easyget Rinkeby Ethereum Lottery Contract"})},h=n(340),y=n(753),f=n.p+"static/media/rejoicing-main.00f6b3ab.png",b=(n(755),n(754)),m=n(127),j=n(71),w=new b.a.Interface(j);new m.a("0x61fc507e6e2f41fb207c6fd21ed54cf8caf6ecf9",w);var g=Object(y.a)((function(e){return{green:{background:"#00FF2A"},pink:{background:"#FF0077"},container:{padding:"72px 0px 72px 72px",display:"flex",justifyContent:"flex-start",gap:e.spacing(1)}}})),O=function(e){var t=g(),n=Object(h.a)();n.activateBrowserWallet,n.deactivate,n.account,e.recentWinner;return Object(d.jsx)("div",{className:t.container,children:Object(d.jsxs)("div",{className:"full-width",children:[Object(d.jsxs)("div",{className:"header-connect",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:e.account}),e.isConnected?Object(d.jsx)("button",{color:"green",className:"btn connect-btn connected",children:"Connected"}):Object(d.jsx)("button",{color:"primary",className:"btn connect-btn",onClick:function(){e.connectMetaMask()},children:"Connect wallet"})]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("div",{children:"Ongoing"===e.lotteryState?Object(d.jsx)("button",{color:"green",onClick:function(){e.endLottery()},children:"End Lottery"}):"Ended/Not Started"==e.lotteryState?Object(d.jsx)("button",{color:"primary",onClick:function(){e.startLottery()},children:"Start Lottery"}):e.lotteryState}),"Lottery State: ",Object(d.jsx)("span",{children:e.lotteryState})]})]}),Object(d.jsxs)("div",{className:"header-hero",children:[Object(d.jsx)("div",{className:"header-hero-item1",children:"You can enter with at least 50 usd worth of ethereum"}),Object(d.jsxs)("button",{className:"header-hero-item2",onClick:function(){e.enterLottery()},children:["Enter ",Object(d.jsx)("br",{}),"Lottery"]}),Object(d.jsx)("div",{className:"header-hero-item3",children:Object(d.jsx)("img",{src:f,width:"500px",height:"400px"})})]})]})})},x=n(46),v=n.n(x);var T=function(e){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("td",{className:"recent-winner",children:e.winner.player}),Object(d.jsxs)("td",{className:"recent-winner",children:[parseFloat(v.a.utils.fromWei(e.winner.entranceFeeInWei+"","ether")).toFixed(3),"eth"]}),Object(d.jsxs)("td",{className:"recent-winner",children:[e.winner.applicants," applicant(s)"]}),Object(d.jsxs)("td",{className:"recent-winner",children:[parseFloat(v.a.utils.fromWei(e.winner.amountWon+"","ether")).toFixed(3),"eth"]}),Object(d.jsx)("td",{className:"recent-winner",children:new Date(1e3*e.winner.closedDate).toLocaleString()})]})};var k=function(e){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("td",{className:"recent-winners-th",children:Object(d.jsx)("div",{children:e.header.address})}),Object(d.jsx)("td",{className:"recent-winners-th",children:Object(d.jsx)("div",{children:e.header.fee})}),Object(d.jsx)("td",{className:"recent-winners-th",children:Object(d.jsx)("div",{children:e.header.applicants})}),Object(d.jsx)("td",{className:"recent-winners-th",children:Object(d.jsx)("div",{children:e.header.won})}),Object(d.jsx)("td",{className:"recent-winners-th",children:Object(d.jsx)("div",{children:e.header.date})})]})},N=[{address:"Winners",fee:"Entrance fee",won:"Amount Won",date:"Closed",applicants:"Applicants"}];var C=function(e){var t=Object(a.useState)(e.recentWinners),n=Object(l.a)(t,2);return n[0],n[1],Object(d.jsxs)("tbody",{id:"Recent winners",className:"recent-winners",children:[Object(d.jsx)("tr",{className:"recent-winners-heading",children:Object(d.jsx)("td",{children:"Recent Winners"})}),Object(d.jsxs)("tr",{className:"recent-winners-table",children:[N.map((function(e){return Object(d.jsx)(k,{header:e},e.address.toString())})),e.recentWinners.map((function(e,t){return Object(d.jsx)(T,{winner:e},t)}))]})]})};var S=function(e){return Object(d.jsxs)("div",{className:"how-it-works",children:[Object(d.jsx)("p",{className:"how-it-works-heading",children:" How it Works"}),Object(d.jsxs)("p",{className:"paragraph",children:["Easylottery is a completely decentralized lottery application where you can enter lottery with a particular amount of ether and then stand a chance to win 100% of the total amount invested into the lottery session. The Lottery system is divided into 3 states namely Closed state, Open state, Calculating winner state.",Object(d.jsx)("br",{}),Object(d.jsx)("span",{style:{color:"red"},children:"Note: This lottery system only works on the rinkeby testnet, it hasn't been deploy on any other ethereum network"})]}),Object(d.jsxs)("div",{className:"lottery-state",children:[Object(d.jsx)("p",{children:"Closed State:"}),Object(d.jsx)("p",{children:"In the closed state, users cannot enter lottery.  This state signifies that the lottery has ended and needs to be started again. After this state is the open state."})]}),Object(d.jsxs)("div",{className:"lottery-state",children:[Object(d.jsx)("p",{children:"Open State:"}),Object(d.jsx)("p",{children:"In the open state, users can enter lottery with a minimum amount of 50usd worth of ethereum. The lottery will remain open until it is ended by the user. After this state is the calculating winner state. You can click the blue start lottery button on top if the lottery has not yet been started"})]}),Object(d.jsxs)("div",{className:"lottery-state",children:[Object(d.jsxs)("p",{children:["Calculating ",Object(d.jsx)("br",{})," Winner:"]}),Object(d.jsx)("p",{children:"In the calculating winner state the lottery app generates a random number and uses this random number to select a random winner. New entry into the lottery app is also not allowed in these state. This is state usually takes about a minute before transitioning automatically to the closed state"})]})]})};var M=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),i=n[0],s=n[1];return Object(d.jsxs)("div",{className:"faq",onClick:function(){s(!i)},children:[Object(d.jsx)("p",{className:"question",children:e.faq.question}),Object(d.jsx)("div",{className:i?"answer":"answer hide",children:e.faq.answer})]})},F=[{question:"How do I enter lottery?",answer:'Make sure your metamask is connected and click the glowing "Enter Lottery" image'},{question:"How do I get free ether to play?",answer:'visit "https://faucet.rinkeby.io/" and follow the instructions get free ether to play'},{question:"How is the winner choosen?",answer:"first the lottery contract generates a random number using chainlink, this random number is used to select a random winner from the list of participants"},{question:"what is the lottery contract address?",answer:"Not for now, these lottery contract only works on the rinkeby ethereum testnet"},{question:"Can I play on the mainnet",answer:"Not for now, these lottery contract only works on the rinkeby ethereum testnet"}];var E=function(e){var t=Object(a.useState)(F),n=Object(l.a)(t,2),i=n[0];return n[1],Object(d.jsxs)("div",{className:"faqs",children:[Object(d.jsx)("p",{className:"how-it-works-heading",children:" Frequently Asked question"}),i.map((function(e,t){return Object(d.jsx)(M,{faq:e},t)}))]})},W="https://rinkeby.infura.io/v3/c95d9276d5e041acbe6411cdda48275e";var L=function(){var e="0x65fd425aD3f20835662A9447677A7df40055EF68",t=Object(a.useState)([]),n=Object(l.a)(t,2),i=n[0],s=n[1],r=Object(a.useState)(!1),c=Object(l.a)(r,2),h=c[0],y=c[1],f=Object(a.useState)([]),b=Object(l.a)(f,2),m=b[0],w=b[1],g=Object(a.useState)(),x=Object(l.a)(g,2),T=(x[0],x[1]),k=Object(a.useState)(),N=Object(l.a)(k,2),M=(N[0],N[1]),F=Object(a.useState)(),L=Object(l.a)(F,2),I=L[0],q=L[1];function A(){return(A=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.ethereum.on("accountsChanged",Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("you changed the currently selected account"),new v.a(v.a.givenProvider).eth.getAccounts().then((function(e){w(e),e[0]||(console.log("no account is connected"),y(!1))}));case 3:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){e.methods.lottery_state().call().then((function(e){switch(e){case"0":q("Ended/Not Started");break;case"1":q("Ongoing");break;case"2":q("Calculating winner, please wait");break;case"3":q("Processing...");break;default:q("Unknown!")}}),(function(e){console.log(e)}))}Object(a.useEffect)((function(){var t=new v.a(W);M(t);var n=new t.eth.Contract(j,e);T(n),_(),function(){A.apply(this,arguments)}(),function(e){e.methods.lottery_count().call().then((function(t){for(var n=[],a=t,i=5;t>0&&i>0;)e.methods.recentWinners(t).call().then((function(e){n.push(e),a--,i--,0!=a&&0!=i||(console.log("Recent winners retrieved succesfully: "+i+"|"),s(n))}),(function(e){console.log(e),alert("There was an error retrieving recent winners")})),console.log(i>0),t--}),(function(e){console.log(e)}))}(n),B(n)}),[]);var _=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("attempting to connect metamask"),!window.ethereum){e.next=10;break}e.prev=2,v.a.givenProvider.send("eth_requestAccounts").then((function(e){return w(e.result),y(!0),!0})),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(2),console.log("There was an error connecting to metamask"),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[2,6]])})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{children:[Object(d.jsx)(p,{id:"Home"}),Object(d.jsx)(O,{account:m[0],endLottery:function(){q("Processing...");var t=new v.a(W),n=new t.eth.Contract(j,e),a=t.eth.accounts.privateKeyToAccount("0x65cde2fe2e5f7c84d33f6e1b25585ff2469b5704d43e1c18a72b5b6978aef57a");t.eth.getTransactionCount("0x281B3B65AE71fc4EBBa61325a6bC2974B80F04c2",function(){var i=Object(u.a)(o.a.mark((function i(s,r){var c,u;return o.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return c={nonce:r,to:e,gasLimit:3e5,gasPrice:t.utils.toHex(t.utils.toWei("10","gwei")),chainId:4,data:n.methods.endLottery().encodeABI()},i.next=3,t.eth.accounts.signTransaction(c,a.privateKey);case 3:u=i.sent,console.log("attempting to send signed transaction"),t.eth.sendSignedTransaction(u.rawTransaction,(function(e,t){e?console.log("\u2757Something went wrong while submitting your transaction:",e):console.log("\ud83c\udf89 The hash of your transaction is: ",t,"\n Check Infura's Mempool to view the status of your transaction!")})).then((function(e){q("Ended/Not Started"),console.log("this is the transaction receipt"),console.log(e),B(n)}),(function(e){console.log("this is the transaction error receipt"),B(n),console.log(e)}));case 6:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}())},startLottery:function(){q("Processing...");var t=new v.a(W),n=new t.eth.Contract(j,e),a=t.eth.accounts.privateKeyToAccount("0x65cde2fe2e5f7c84d33f6e1b25585ff2469b5704d43e1c18a72b5b6978aef57a");t.eth.getTransactionCount("0x281B3B65AE71fc4EBBa61325a6bC2974B80F04c2",function(){var i=Object(u.a)(o.a.mark((function i(s,r){var c,u;return o.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return c={nonce:r,to:e,gasLimit:3e5,gasPrice:t.utils.toHex(t.utils.toWei("10","gwei")),chainId:4,data:n.methods.startLottery().encodeABI()},i.next=3,t.eth.accounts.signTransaction(c,a.privateKey);case 3:u=i.sent,console.log("attempting to send signed transaction"),t.eth.sendSignedTransaction(u.rawTransaction,(function(e,t){e?console.log("\u2757Something went wrong while submitting your transaction:",e):console.log("\ud83c\udf89 The hash of your transaction is: ",t,"\n Check Infura's Mempool to view the status of your transaction!")})).then((function(e){q("Ongoing"),console.log("this is the transaction receipt"),console.log(e),B(n)}),(function(e){console.log("this is the transaction error receipt"),console.log(e),B(n)}));case 6:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}())},enterLottery:function(){if("Ongoing"==I){var t=new(new v.a(v.a.givenProvider).eth.Contract)(j,e);t.methods.entranceFeeInWei().call().then((function(e){t.methods.enter().send({from:m[0],value:1.05*e}).then((function(e){console.log("Entered lottery succesfully")}),(function(e){console.log("An error occured while attempting to enter lottery"),console.log(e)}))}),(function(e){console.log("error retrieving the entrance fee in wei"+e)}))}else{alert("Cannot enter lottery when it's "+I+" Please "+("Ended/Not Started"==I?"Click the blue start lottery button to start the lottery":"wait a little for the previouse winner to be selected and then start a new lottery session"))}},connectMetaMask:_,isConnected:h,lotteryState:I}),Object(d.jsx)("table",{children:Object(d.jsx)(C,{recentWinners:i})}),Object(d.jsx)(S,{}),Object(d.jsx)(E,{})]})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,756)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),s(e),r(e)}))};r.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(L,{})}),document.getElementById("root")),I()}},[[736,1,2]]]);
//# sourceMappingURL=main.6e51192b.chunk.js.map